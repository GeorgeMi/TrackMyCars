<div ng-controller="CarDetailsController as ctrl">
    <div class="panel panel-default" ng-controller="UserController as user">
        <div class="panel-heading" data-toggle="collapse">Update car</div>
        <div class="panel-body">
            <form class="form-horizontal">
                <div class="form-group ">
                    <label class="control-label col-sm-2">Registration Number:</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" placeholder="Registration Number" ng-model="ctrl.updateCar.RegNo" pattern="^[A-Z]{1,2}-?[0-9]{2,3}-?[A-Z]{3}$" title="Must be in the following order: IS-01-ABC" required>
                    </div>
                </div>

                <div class="form-group ">
                    <label class="control-label col-sm-2">Brand:</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" placeholder="Brand" ng-model="ctrl.updateCar.Brand" required>
                    </div>
                </div>

                <div class="form-group ">
                    <label class="control-label col-sm-2">Year:</label>
                    <div class="col-sm-8">
                        <input type="number" min="1990" max="2020" class="form-control" placeholder="Year" ng-model="ctrl.updateCar.Year" required>
                    </div>
                </div>

                <div class="form-group ">
                    <label class="control-label col-sm-2">KM:</label>
                    <div class="col-sm-8">
                        <input type="number" min="0" class="form-control" placeholder="Kilometers" ng-model="ctrl.updateCar.KmNo" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2">Driver:</label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="ctrl.updateCar.DriverID" required>
                            <option value="0"> - </option>
                            <option value="{{user.UserID}} " ng-repeat="user in user.users">{{ user.Username }}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2">Utilities:</label>
                </div>

                <div class="panel panel-default" ng-controller="UtilityController as ut">
                    <div class="panel-body">
                        <table class="table table-responsive">
                            <thead class="thead-default">
                            <tr>
                                <th>Add/Remove</th>
                                <th>Name</th>
                                <th>Distance (KM)</th>
                                <th>Period (Months)</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="utility in ut.utilities  | filter:searchText">
                                <td><input type="checkbox" ng-click="ctrl.checkbox(utility.UtilityID)" ng-checked="ctrl.verifyUtilityId(utility.UtilityID)" />&nbsp;</td>
                                <td>{{ utility.UtilityName }}</td>
                                <td>{{ utility.KmNo }}</td>
                                <td>{{ utility.MonthsNo }}</td>
                                <td>{{ utility.Description }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-4 col-sm-offset-2">
                        <div class="btn-group btn-group-justified" role="group" aria-label="...">
                            <div class="btn-group" role="group">
                                <button class="btn btn-primary" ng-click="ctrl.updateCarDetails()">Update car</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-8 col-sm-offset-2">
                        <div ng-if="ctrl.created == 'success'" class="alert alert-success" role="alert">{{ctrl.messageForm}}</div>
                        <div ng-if="ctrl.created == 'fail'" class="alert alert-danger" role="alert">{{ctrl.messageForm}}</div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="col-sm-8 col-sm-offset-2">
        <div ng-if="ctrl.message" class="alert alert-info" role="alert">{{ctrl.message}}</div>
    </div>
</div>

